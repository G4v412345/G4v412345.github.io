<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Drag the Word ‚ùÑ</title>
    <link rel="stylesheet" href="../style.css">
    <style>
        .big-word {
            font-size: 64px;
            margin: 40px 0;
            padding: 30px;
            border: 3px dashed #333;
            border-radius: 20px;
            min-height: 120px;
        }

        .items {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .item {
            font-size: 70px;
            cursor: grab;
            transition: transform 0.2s;
        }

        .item:hover {
            transform: scale(1.1);
        }

        #resultMessage {
            font-size: 28px;
            margin-top: 20px;
        }

        .next-btn {
            font-size: 28px;
            padding: 15px 30px;
            margin-top: 30px;
        }

        .rules-box {
            margin-top: 40px;
            font-size: 20px;
        }
    </style>
</head>
<body class="winter-bg">

<div class="game-container">

    <button class="back-btn" onclick="goBack()">‚¨Ö –ù–∞–∑–∞–¥</button>

    <div id="wordContainer" class="big-word"></div>

    <div id="itemsContainer" class="items"></div>

    <p id="resultMessage"></p>
    <button class="next-btn" onclick="startRound()">Next ‚ùÑ</button>

    <div class="rules-box">
        <h2>üéØ How to play</h2>
        <p>
            Look at the big word.<br>
            Drag the correct picture to the word!
        </p>

        <p class="ua-rules">
            –ü–æ–¥–∏–≤–∏—Å—å –Ω–∞ –≤–µ–ª–∏–∫–µ —Å–ª–æ–≤–æ.<br>
            –ü–µ—Ä–µ—Ç—è–≥–Ω–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É –∫–∞—Ä—Ç–∏–Ω–∫—É –¥–æ —Å–ª–æ–≤–∞!
        </p>
    </div>

</div>

<script>
const items = [
    {word: "Hat", icon: "üé©"},
    {word: "Scarf", icon: "üß£"},
    {word: "Mitten", icon: "üß§"},
    {word: "Sweater", icon: "üß•"},
    {word: "Boots", icon: "ü•æ"},
    {word: "Toy", icon: "üß∏"},
    {word: "Doll", icon: "ü™Ü"},
    {word: "Train", icon: "üöÇ"},
    {word: "Snow", icon: "‚ùÑÔ∏è"},
    {word: "Ice", icon: "üßä"},
    {word: "Star", icon: "‚≠ê"}
];

let correctItem = null;

function startRound() {
    document.getElementById("resultMessage").textContent = "";

    const wordContainer = document.getElementById("wordContainer");
    const itemsContainer = document.getElementById("itemsContainer");

    itemsContainer.innerHTML = "";

    const shuffled = shuffle([...items]);
    const roundItems = shuffled.slice(0, 4);
    correctItem = roundItems[Math.floor(Math.random() * roundItems.length)];

    wordContainer.textContent = correctItem.word.toUpperCase();

    roundItems.forEach(item => {
        let div = document.createElement("div");
        div.className = "item";
        div.textContent = item.icon;
        div.draggable = true;

        div.addEventListener("dragstart", (e) => {
            e.dataTransfer.setData("text/plain", item.word);
        });

        itemsContainer.appendChild(div);
    });
}

const wordContainer = document.getElementById("wordContainer");

wordContainer.addEventListener("dragover", (e) => {
    e.preventDefault();
});

wordContainer.addEventListener("drop", (e) => {
    e.preventDefault();
    const draggedWord = e.dataTransfer.getData("text/plain");

    if (draggedWord === correctItem.word) {
        document.getElementById("resultMessage").textContent = "Good job! ‚úÖ";
        speakText("Good job!");
    } else {
        document.getElementById("resultMessage").textContent = "Try again! ‚ùå";
        speakText("Try again!");
    }
});

function shuffle(array) {
    return array.sort(() => Math.random() - 0.5);
}

function speakText(text) {
    let speech = new SpeechSynthesisUtterance(text);
    speech.lang = "en-US";
    speech.rate = 0.8;
    window.speechSynthesis.speak(speech);
}

function goBack() {
    window.location.href = "../index.html";
}

startRound();
</script>

</body>
</html>
