<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Winter Game ‚ùÑ</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body class="winter-bg">

<div class="game-container">

    <button class="back-btn" onclick="goBack()">‚¨Ö –ù–∞–∑–∞–¥</button>

    <h1 id="wordDisplay">SCARF</h1>
    <button class="sound-btn" onclick="speakWord()">üîä</button>

    <div id="itemsContainer" class="items"></div>

    <p id="resultMessage"></p>
    <button class="next-btn" onclick="startRound()">Next ‚ùÑ</button>

    <div class="rules-box">
    <h2>üéØ How to play</h2>
    <p>
        Look at the word on the top.<br>
        Find the picture that DOES NOT belong.<br>
        Click the wrong item!
    </p>

    <p class="ua-rules">
        –ü–æ–¥–∏–≤–∏—Å—å –Ω–∞ —Å–ª–æ–≤–æ –∑–≤–µ—Ä—Ö—É.<br>
        –ó–Ω–∞–π–¥–∏ –ø—Ä–µ–¥–º–µ—Ç, —è–∫–∏–π –ù–ï –ø—ñ–¥—Ö–æ–¥–∏—Ç—å.<br>
        –ù–∞—Ç–∏—Å–Ω–∏ –Ω–∞ –∑–∞–π–≤–∏–π –ø—Ä–µ–¥–º–µ—Ç.
    </p>
    </div>

</div>

<script>
const categories = {
    clothes: ["Hat", "Scarf", "Mitten", "Sweater", "Boots"],
    toys: ["Toy", "Doll", "Train"],
    winter: ["Winter", "Snow", "Ice", "Cold", "Frost", "Snowflake"],
    holiday: ["Christmas tree", "Star"]
};

let currentCategory = "";
let currentWord = "";

function startRound() {
    document.getElementById("resultMessage").textContent = "";
    const container = document.getElementById("itemsContainer");
    container.innerHTML = "";

    const categoryNames = Object.keys(categories);
    currentCategory = categoryNames[Math.floor(Math.random() * categoryNames.length)];

    const categoryWords = categories[currentCategory];

    currentWord = categoryWords[Math.floor(Math.random() * categoryWords.length)];
    document.getElementById("wordDisplay").textContent = currentWord.toUpperCase();

    let correctItems = shuffle([...categoryWords])
        .filter(w => w !== currentWord)
        .slice(0, 3);

    let otherCategories = categoryNames.filter(c => c !== currentCategory);
    let wrongCategory = otherCategories[Math.floor(Math.random() * otherCategories.length)];
    let wrongWord = categories[wrongCategory][
        Math.floor(Math.random() * categories[wrongCategory].length)
    ];

    let items = [...correctItems, wrongWord];
    items = shuffle(items);

    items.forEach(word => {
        let div = document.createElement("div");
        div.className = "item";
        div.textContent = word;
        div.onclick = () => checkAnswer(word, div);
        container.appendChild(div);
    });
}

function checkAnswer(word, element) {
    if (!categories[currentCategory].includes(word)) {
        element.classList.add("correct");
        document.getElementById("resultMessage").textContent =
            "Good job! This is not a " + currentWord + "!";
        speakText("Good job! This is not a " + currentWord);
    } else {
        element.classList.add("wrong");
    }
}

function speakWord() {
    speakText(currentWord);
}

function speakText(text) {
    let speech = new SpeechSynthesisUtterance(text);
    speech.lang = "en-US";
    speech.rate = 0.8;
    window.speechSynthesis.speak(speech);
}

function shuffle(array) {
    return array.sort(() => Math.random() - 0.5);
}

function goBack() {
    window.location.href = "../index.html";
}

startRound();
</script>

</body>
</html>
