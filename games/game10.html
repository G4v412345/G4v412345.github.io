<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Pack the Winter Bag üéí</title>
    <link rel="stylesheet" href="../style.css">
    <style>

        #taskDisplay {
            font-size: 34px;
            margin-bottom: 20px;
        }

        .bag-area {
            font-size: 120px;
            margin: 20px auto;
            width: 220px;
            height: 180px;
            border: 3px dashed white;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .items {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .item {
            font-size: 90px;
            cursor: grab;
            transition: transform 0.2s;
        }

        .item:hover {
            transform: scale(1.2);
        }

        #resultMessage {
            font-size: 28px;
            margin-top: 20px;
        }

        .next-btn {
            font-size: 26px;
            padding: 12px 25px;
            margin-top: 20px;
        }

        .rules-box {
            margin-top: 40px;
            font-size: 20px;
        }

    </style>
</head>
<body class="winter-bg">

<div class="game-container">

    <button class="back-btn" onclick="goBack()">‚¨Ö –ù–∞–∑–∞–¥</button>

    <div class="bag-area" id="bag">üéí</div>

    <div id="taskDisplay">Pack 3 winter items!</div>

    <div id="itemsContainer" class="items"></div>

    <p id="resultMessage"></p>
    <button class="next-btn" onclick="startRound()">New Bag üéí</button>

    <div class="rules-box">
        <h2>üéØ How to play</h2>
        <p>
            Drag 3 winter items into the bag!
        </p>

        <p class="ua-rules">
            –ü–µ—Ä–µ—Ç—è–≥–Ω–∏ 3 –∑–∏–º–æ–≤—ñ —Ä–µ—á—ñ –≤ —Ä—é–∫–∑–∞–∫!
        </p>
    </div>

</div>

<script>

const packItems = [
    {word: "Hat", icon: "üé©"},
    {word: "Scarf", icon: "üß£"},
    {word: "Mitten", icon: "üß§"},
    {word: "Sweater", icon: "üß•"},
    {word: "Boots", icon: "ü•æ"},
    {word: "Toy", icon: "üß∏"},
    {word: "Doll", icon: "ü™Ü"}
];

const distractors = [
    {word: "Winter", icon: "üå®Ô∏è"},
    {word: "Snow", icon: "‚ùÑÔ∏è"},
    {word: "Ice", icon: "üßä"},
    {word: "Cold", icon: "ü•∂"},
    {word: "Frost", icon: "üå¨Ô∏è"},
    {word: "Snowflake", icon: "‚ùÑÔ∏è"},
    {word: "Train", icon: "üöÇ"},
    {word: "Christmas tree", icon: "üéÑ"},
    {word: "Star", icon: "‚≠ê"}
];

let packedCount = 0;

function startRound() {

    packedCount = 0;
    document.getElementById("resultMessage").textContent = "";

    const container = document.getElementById("itemsContainer");
    container.innerHTML = "";

    let allItems = [...packItems, ...distractors];
    allItems = shuffle(allItems).slice(0, 10);

    allItems.forEach(item => {
        let div = document.createElement("div");
        div.className = "item";
        div.textContent = item.icon;
        div.draggable = true;

        div.addEventListener("dragstart", (e) => {
            e.dataTransfer.setData("text/plain", item.word);
        });

        container.appendChild(div);
    });
}

const bag = document.getElementById("bag");

bag.addEventListener("dragover", (e) => {
    e.preventDefault();
});

bag.addEventListener("drop", (e) => {
    e.preventDefault();
    let droppedWord = e.dataTransfer.getData("text/plain");
    const resultMessage = document.getElementById("resultMessage");

    let correct = packItems.find(item => item.word === droppedWord);

    if (correct) {
        packedCount++;
        speakText("Good choice!");
        resultMessage.textContent = "Packed: " + packedCount + "/3 ‚úÖ";

        if (packedCount === 3) {
            resultMessage.textContent = "Great! Bag is ready! üéâ";
            speakText("Great! Bag is ready!");
        }
    } else {
        resultMessage.textContent = "That is not for the bag ‚ùå";
        speakText("Try again!");
    }
});

function shuffle(array) {
    return array.sort(() => Math.random() - 0.5);
}

function speakText(text) {
    let speech = new SpeechSynthesisUtterance(text);
    speech.lang = "en-US";
    speech.rate = 0.8;
    window.speechSynthesis.speak(speech);
}

function goBack() {
    window.location.href = "../index.html";
}

startRound();

</script>

</body>
</html>
