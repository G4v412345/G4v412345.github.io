<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Word Ladder Game ü™ú</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body class="winter-bg">

<div class="game-container">

    <button class="back-btn" onclick="goBack()">‚¨Ö –ù–∞–∑–∞–¥</button>

    <div class="word-row">
        <h1 id="wordDisplay" style="visibility:hidden;">SCARF</h1>
        <button class="sound-btn" onclick="speakWord()">üîä Listen</button>
    </div>

    <div id="itemsContainer" class="items"></div>

    <p id="resultMessage"></p>
    <button class="next-btn" onclick="startRound()">Restart üîÑ</button>

    <div class="rules-box">
        <h2>üéØ How to play</h2>
        <p>
            Listen to the word.<br>
            Click the matching item in the same order!
        </p>
        <p class="ua-rules">
            –ü–æ—Å–ª—É—Ö–∞–π —Å–ª–æ–≤–æ.<br>
            –ù–∞—Ç–∏—Å–∫–∞–π –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç–∏ —É —Ç—ñ–π –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ, —è–∫ —Ç–∏ –π–æ–≥–æ —á—É–≤.
        </p>
    </div>

</div>

<script>
const words = [
    "Hat","Scarf","Mitten","Sweater","Boots",
    "Doll","Train",
    "Snow","Ice","Snowflake",
    "Christmas tree","Star"
];

let sequence = [];      
let currentIndex = 0;   

function startRound() {
    document.getElementById("resultMessage").textContent = "";
    const container = document.getElementById("itemsContainer");
    container.innerHTML = "";

    sequence = shuffle([...words]).slice(0, 5);

    currentIndex = 0;
    speakWord();  

    const items = shuffle([...sequence]);  
    items.forEach(word => {
        const div = document.createElement("div");
        div.className = "item";
        div.textContent = word;
        div.onclick = () => checkAnswer(word, div);
        container.appendChild(div);
    });
}

function checkAnswer(word, element) {
    const currentWord = sequence[currentIndex];

    if (word === currentWord) {
        element.classList.add("correct");
        currentIndex++;
        if (currentIndex < sequence.length) {
            document.getElementById("resultMessage").textContent = "Good! Next word:";
            speakWord();
        } else {
            document.getElementById("resultMessage").textContent = "üéâ You completed the sequence!";
        }
    } else {
        element.classList.add("wrong");
        document.getElementById("resultMessage").textContent = "Oops! Try again!";
        speakText("Oops! Try again!");
    }
}

function speakWord() {
    speakText(sequence[currentIndex]);
}

function speakText(text) {
    const speech = new SpeechSynthesisUtterance(text);
    speech.lang = "en-US";
    speech.rate = 0.8;
    window.speechSynthesis.speak(speech);
}

function shuffle(array) {
    return array.sort(() => Math.random() - 0.5);
}

function goBack() {
    window.location.href = "../index.html";
}

startRound();
</script>

</body>
</html>
