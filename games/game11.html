<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Catch the Snowflake ‚ùÑ</title>
<link rel="stylesheet" href="../style.css">
<style>

#gameArea {
    position: relative;
    width: 100%;
    height: 500px;
    overflow: hidden;
    border: 3px solid white;
    border-radius: 20px;
    margin-top: 20px;
}

.falling-item {
    position: absolute;
    text-align: center;
    cursor: pointer;
    user-select: none;
    animation: fall linear forwards;
}

.falling-item .emoji {
    font-size: 50px;
}

.falling-item .word {
    font-size: 18px;
    font-weight: bold;
    margin-top: 5px;
}

@keyframes fall {
    from { top: -80px; }
    to { top: 520px; }
}

#scoreBoard {
    font-size: 28px;
    margin-top: 20px;
}

.rules-box {
    margin-top: 40px;
    font-size: 20px;
}

</style>
</head>

<body class="winter-bg">

<div class="game-container">

<button class="back-btn" onclick="goBack()">‚¨Ö –ù–∞–∑–∞–¥</button>
<div id="scoreBoard">
Score: <span id="score">0</span>
</div>

<div id="gameArea"></div>

<div class="rules-box">
<h3>üéØ How to play</h3>
<p>
Click only winter items! <br>
Do NOT click toys or clothes!
</p>
<p class="ua-rules">
–ù–∞—Ç–∏—Å–∫–∞–π —Ç—ñ–ª—å–∫–∏ –∑–∏–º–æ–≤—ñ —Å–ª–æ–≤–∞! <br>
–ù–µ –Ω–∞—Ç–∏—Å–∫–∞–π —ñ–≥—Ä–∞—à–∫–∏ –∞–±–æ –æ–¥—è–≥!
</p>
</div>

</div>

<script>

const allItems = [
{word:"Winter", icon:"üå®Ô∏è"},
{word:"Snow", icon:"‚ùÑÔ∏è"},
{word:"Ice", icon:"üßä"},
{word:"Cold", icon:"ü•∂"},
{word:"Frost", icon:"üå¨Ô∏è"},
{word:"Snowflake", icon:"‚ùÑÔ∏è"},
{word:"Toy", icon:"üß∏"},
{word:"Doll", icon:"ü™Ü"},
{word:"Train", icon:"üöÇ"},
{word:"Hat", icon:"üé©"},
{word:"Scarf", icon:"üß£"},
{word:"Mitten", icon:"üß§"},
{word:"Sweater", icon:"üß•"},
{word:"Boots", icon:"ü•æ"},
{word:"Christmas tree", icon:"üéÑ"},
{word:"Star", icon:"‚≠ê"}
];

const winterWords = [
"Winter","Snow","Ice","Cold","Frost","Snowflake","Christmas tree","Star"
];

let score = 0;
const gameArea = document.getElementById("gameArea");

function createFallingItem() {

    const item = allItems[Math.floor(Math.random() * allItems.length)];

    const container = document.createElement("div");
    container.className = "falling-item";

    container.style.left = Math.random() * 85 + "%";
    container.style.animationDuration = (3 + Math.random() * 2) + "s";

    container.innerHTML = `
        <div class="emoji">${item.icon}</div>
        <div class="word">${item.word}</div>
    `;

    container.onclick = function() {

        speakText(item.word);

        if (winterWords.includes(item.word)) {
            score++;
        } else {
            score--;
        }

        document.getElementById("score").textContent = score;
        container.remove();
    };

    gameArea.appendChild(container);

    setTimeout(() => {
        container.remove();
    }, 6000);
}

function speakText(text) {
    let speech = new SpeechSynthesisUtterance(text);
    speech.lang = "en-US";
    speech.rate = 0.85;
    window.speechSynthesis.speak(speech);
}

function goBack() {
    window.location.href = "../index.html";
}

setInterval(createFallingItem, 1200);

</script>

</body>
</html>
